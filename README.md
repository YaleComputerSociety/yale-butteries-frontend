# Yale Butteries (Frontend)

Yale Butteries is a React Native + Express.js app for ordering in advance from the Yale residential college butteries.

## Setting up the Development Environment

To run the full app, you will also need access to the [backend repository](https://github.com/Yale-Butteries/backend), but you can still do plenty without it

Install the latest version of **Node.js** and then **Yarn**. Additionally, download **XCode** if you're using a mac, and **Android Studio** otherwise (you can also use Android Studio on a Mac, but with the M1 chips it's a little tricky).

In the root of `buttery-app`, run `yarn` to install all of the dependencies. Whenever someone adds a new package you'll need to run this command again (it'll be quicker the next time)

Now run `yarn start` to run the app with expo
- To run in production mode, run `yarn start --no-dev`

- Run on iPhone simulator (Apple computer only):
    - Download [XCode](https://apps.apple.com/us/app/xcode/id497799835?mt=12)
    - Open the **Simulator** app
    - press **i** from the yarn start terminal
- Run on Android simulator (difficult with ARM archicecture):
    - Download [Android Studio](https://developer.android.com/studio)
    - Open **Android Studio**, click on the three dots at the top right, and click on **virtual device manager**
    - Choose a device, or if this is your first time, set up a device. It doesn't matter much what the device is, just make one that works for your machine
    press **a** from the yarn start terminal
    - If you have an ARM architecture (such as Macs with M1 chips), you will need to set up an emulator in addition
- Run it on your physical phone:
    - Download the **Expo** app
    - Scan the QR code generated by the yarn start terminal


With the frontend running, you'll be able to see the app and interact with it, but any backend functionality won't work, meaning you won't even be able to login with CAS. Look at the [backend repository](https://github.com/Yale-Butteries/backend) to set up the rest

## Building and Deploying the App

#### iOS

- First, make sure that you increment the version number in **app.json** by some amount, otherwise the apple submit will throw an error
- Build the app binary using Expo. You'll want to first make a simulator build to run on your simulator: `eas build -p ios --profile preview`. It should take about 10 minutes
- With the new build finished, run `eas build:run -p ios --latest`
- If that worked, you can make a real build with `eas build --platform ios`
- Now you'll want to submit the build to the app store. Run `eas submit --platform ios`

## Version Control

- For Git usage, please follow this guide: `https://nvie.com/posts/a-successful-git-branching-model/`
